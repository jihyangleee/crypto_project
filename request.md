\# 프로젝트: Java Spring Boot를 이용한 보안 채팅 및 파일 전송 프로그램 개발



\## 1. 프로젝트 개요



\[cite\_start]이 프로젝트의 목표는 RSA와 AES 암호화 알고리즘을 사용하여 안전한 1:1 통신을 제공하는 클라이언트-서버 애플리케이션을 개발하는 것입니다\[cite: 10, 12, 13]. \[cite\_start]프로그램은 \*\*서버 모드\*\* 또는 \*\*클라이언트 모드\*\*로 동작할 수 있어야 하며\[cite: 21], 암호화된 채팅과 전자서명이 포함된 파일 전송 기능을 지원해야 합니다.



\*\*기술 스택:\*\*

\- \*\*언어:\*\* Java

\- \*\*프레임워크:\*\* Spring Boot (Spring Shell을 이용한 CLI 기반)

\- \*\*IDE:\*\* Visual Studio Code



---



\## 2. 기본 기능 요구사항 (Basic Assignment)



\### 2.1. 통신 및 모드 설정

\- 애플리케이션 실행 시 사용자가 \*\*서버\*\* 또는 \*\*클라이언트\*\* 모드를 선택할 수 있어야 합니다.

\- \[cite\_start]\*\*서버 모드:\*\* 사용자가 지정한 포트 번호로 클라이언트의 연결을 대기합니다\[cite: 27].

\- \[cite\_start]\*\*클라이언트 모드:\*\* 사용자가 입력한 서버의 IP 주소와 포트 번호로 연결을 시도합니다\[cite: 25].

\- \[cite\_start]연결이 수립되면, 서버와 클라이언트는 1:1 채팅 및 파일 전송을 할 수 있습니다\[cite: 29, 30].

\- \*\*네트워킹:\*\* Spring Boot 환경에서 TCP 소켓 통신을 구현합니다.



\### 2.2. 암호화 및 보안 기능



\#### A. RSA 키 관리

\- \[cite\_start]\*\*키 생성:\*\* 2048비트 RSA 공개키/개인키 쌍을 생성하는 기능을 구현합니다\[cite: 35, 85].

\- \[cite\_start]\*\*키 저장/불러오기:\*\* 생성된 키 쌍을 파일 형태로 저장하고, 파일로부터 불러올 수 있어야 합니다\[cite: 36].

\- \[cite\_start]\*\*공개키 교환:\*\* 연결된 상대방과 자신의 공개키를 교환하는 기능을 구현합니다\[cite: 38].



\#### B. 암호화된 채팅

\- \*\*세션 키 교환:\*\*

&nbsp;   1.  한쪽(예: 클라이언트)에서 임시 \*\*AES 대칭키(세션 키)\*\*를 생성합니다.

&nbsp;   2.  생성된 AES 키를 상대방의 \*\*RSA 공개키\*\*로 암호화하여 전송합니다.

&nbsp;   3.  \[cite\_start]상대방은 자신의 \*\*RSA 개인키\*\*로 암호화된 AES 키를 복호화하여 세션 키를 공유합니다\[cite: 44].

\- \[cite\_start]\*\*메시지 암호화:\*\* 공유된 AES 세션 키를 사용하여 모든 채팅 메시지를 암호화하여 전송합니다\[cite: 40].

\- \[cite\_start]\*\*메시지 복호화:\*\* 수신된 암호화 메시지를 AES 세션 키로 복호화하고, \*\*암호문과 복호화된 평문\*\*을 모두 화면에 출력합니다\[cite: 41].



\#### C. 보안 파일 전송

\- \*\*파일 암호화 및 서명 (두 기능 모두 구현):\*\*

&nbsp;   1.  \[cite\_start]전송할 파일을 \*\*AES 세션 키\*\*로 암호화합니다\[cite: 43, 44].

&nbsp;   2.  \[cite\_start]원본 파일(또는 암호화된 파일)의 해시값을 생성하고, 나의 \*\*RSA 개인키\*\*로 서명하여 \*\*전자서명\*\*을 만듭니다\[cite: 45].

&nbsp;   3.  \[cite\_start]\*\*암호화된 파일\*\*과 \*\*전자서명\*\*을 함께 상대방에게 전송합니다\[cite: 46].

\- \*\*파일 복호화 및 검증:\*\*

&nbsp;   1.  \[cite\_start]수신자는 먼저 함께 받은 \*\*전자서명\*\*을 보낸 사람의 \*\*RSA 공개키\*\*로 검증하여 파일의 무결성을 확인합니다\[cite: 216].

&nbsp;   2.  \[cite\_start]검증이 성공하면, \*\*AES 세션 키\*\*를 이용해 암호화된 파일을 복호화하여 원본 파일을 복원합니다\[cite: 218].



---



\## 3. 사용자 인터페이스 (UI) - Spring Shell 기반 CLI



\- `@ShellComponent`를 사용하여 명령어 기반 인터페이스를 구현합니다.

\- \*\*주요 명령어:\*\*

&nbsp;   - `start-server --port 9999`: 서버 모드로 애플리케이션을 시작합니다.

&nbsp;   - `connect --host 127.0.0.1 --port 9999`: 클라이언트 모드로 서버에 접속합니다.

&nbsp;   - `gen-keys`: RSA 키 쌍을 생성하고 화면에 출력합니다.

&nbsp;   - `save-keys --path ./mykeys`: 생성된 키를 파일에 저장합니다.

&nbsp;   - `load-keys --path ./mykeys`: 파일에서 키를 불러옵니다.

&nbsp;   - `exchange-key`: 상대방에게 내 공개키를 전송합니다.

&nbsp;   - `send-msg <message>`: 암호화된 채팅 메시지를 보냅니다.

&nbsp;   - `send-file --path <filepath>`: 파일을 암호화하고 서명하여 전송합니다.

&nbsp;   - `exit`: 연결을 종료합니다.



---



\## 4. 확장 기능 요구사항 (선택 사항)



\- \*\*디렉터리 서버 구축:\*\*

&nbsp;   - \[cite\_start]별도의 Spring Boot 애플리케이션으로 \*\*디렉터리 서버\*\*를 구현합니다\[cite: 65].

&nbsp;   - \[cite\_start]이 서버는 \*\*사용자 이름\*\*과 해당 사용자의 \*\*공개키\*\*를 Map이나 간단한 DB에 저장하고 관리합니다\[cite: 69, 76].

&nbsp;   - \[cite\_start]기본 클라이언트/서버 프로그램에서 `get-pubkey --username <이름>`과 같은 명령어로 디렉터리 서버에 특정 사용자의 공개키를 요청하고 받아올 수 있는 기능을 추가합니다\[cite: 66, 75].

